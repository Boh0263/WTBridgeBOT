# WhatsApp と Telegram アカウントをリンクする方法

**注意：クロスプラットフォームのメンションは現在開発中であり、正しく動作しない可能性があります。リンクプロセスは機能しますが、プラットフォーム間のメンション通知には既知の問題があります。**

このガイドでは、WhatsApp と Telegram アカウントをリンクして、メンション（@タグ）が両方のプラットフォームで機能するようにする方法を説明します。一度リンクすると、一方のプラットフォームで誰かをタグ付けすると、もう一方のプラットフォームで通知されます！

## 前提条件

- BridgeBOT が実行されており、WhatsApp と Telegram のグループを接続しています。
- 両方のグループにアカウントがあります。
- あなたの短い名前が設定されています（以下を参照）。

## ステップ 1: Telegram で短い名前を設定する

まず、一意の短い名前を選択します（1-9 文字の英数字、スペースなし）。

1. Telegram グループに移動します。
2. 送信: `/link <あなたの電話番号> <短い名前>`
   - 例: `/link 1234567890 john`
   - 電話番号: 国コードを含め、+ やスペースなし。
3. ボットが確認またはエラーで応答します。

あなたの短い名前は今、Telegram アカウントにリンクされています。

## ステップ 2: WhatsApp からリンクする

1. WhatsApp グループで送信: `!iam <短い名前>`
   - ステップ 1 の同じ短い名前を使用します。
   - 例: `!iam john`

2. ボットがあなたの Telegram アカウントに確認を求めるプライベートメッセージを送信します。

3. Telegram（ボットとのプライベートチャット）で応答: `yes`
   - これは 30 秒以内に完了する必要があります。

4. 両方のアプリで確認メッセージを受け取ります。

## ステップ 3: リンクをテストする

**注意: 現在の制限により、クロスプラットフォームのメンションが期待どおりに機能しない場合があります。**

- WhatsApp で誰かをタグ付けしたメッセージを送信: `@彼らの短い名前`
- Telegram に表示されるはずです（メンション機能が制限される可能性があります）。
- Telegram で誰かをタグ付けしたメッセージを送信: `@彼らのユーザー名`
- WhatsApp に表示されるはずです（メンション機能が制限される可能性があります）。

## トラブルシューティング

### "一致する Telegram ユーザーが見つかりません"
- あなたの短い名前が正しく一意であることを確認してください。
- Telegram ユーザーが `/link` で短い名前を設定していることを確認してください。

### "確認が期限切れです"
- 30 秒が経過しました。`!iam <短い名前>` を再度試してください。

### "電話番号は既にリンクされています"
- 他の誰かがその番号を使用しました。必要に応じて `/unlink` を最初に使用してください。

### メンションが機能しません
- クロスプラットフォームのメンションは現在実験的であり、バグがある可能性があります。
- 両方のユーザーがリンクされていることを確認してください（リンクは機能しますが、メンションは機能しない可能性があります）。
- エラーのボットログを確認してください。
- マッピングがロードされない場合、ボットを再起動してください。

### コマンドが機能しません
- 正しい場所にコマンドを送信していることを確認してください:
  - `/link` と `yes`: Telegram のボットとのプライベートチャットで。
  - `!iam`: WhatsApp グループで。

## リンクを管理する

- **ステータスを確認する**: 直接コマンドなし、メンションでテストしてください。
- **リンクを解除する**: Telegram のプライベートチャットで `/unlink` を送信し、確認のために `yes` と応答してください。
- **短い名前を変更する**: まずリンクを解除し、新しい短い名前でリンクしてください。

## ヒント

- **短い名前のルール**: 1-9 文字、文字と数字のみ。
- **電話のフォーマット**: 10-15 桁、記号なし（例: US の 1234567890）。
- **プライバシー**: クロスプラットフォームのメンションが機能するためにリンクが必要です。
- **グループ管理者**: ボットがメッセージを読む権限を持っていることを確認してください。

## サポート

問題が発生した場合:
1. すべてのステップを二重に確認してください。
2. ボットがオンラインであることを確認してください: メッセージが転送されているかどうかを確認してください。
3. グループ管理者またはボットログに連絡してください。

今、あなたはプラットフォーム間でシームレスに友達をメンションできます！🎉